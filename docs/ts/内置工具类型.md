---
sidebar: 
 title: TypeScript å†…ç½®å·¥å…·ç±»å‹
 step: 1
 isTimeLine: true
title: TypeScript å†…ç½®å·¥å…·ç±»å‹
tags:
 - TypeScript
categories:
 - TypeScript
---

# TypeScript å†…ç½®å·¥å…·ç±»å‹

## å‰è¨€
TSä¸ºäº†æ–¹ä¾¿å¼€å‘è€…ä½¿ç”¨ï¼Œåœ¨å†…éƒ¨æä¾›äº†éå¸¸å¤šçš„å·¥å…·ç±»å‹ï¼Œå¦‚ Partialã€Requiredã€ReadOnly ç­‰ç­‰ï¼Œæœ¬ç¯‡æ–‡ç« ä¸»è¦ç”¨äºè®°å½•äº†ä¸€äº›å¸¸ç”¨çš„å†…ç½®å·¥å…·ç±»å‹çš„ä½¿ç”¨åŠæºç å®ç°ï¼Œä»¥ä¾¿å‚è€ƒã€‚



## **Partial**

`Partial<T>`å°†`T`çš„æ‰€æœ‰å±æ€§æ˜ å°„ä¸ºå¯é€‰çš„ï¼Œä¾‹å¦‚ï¼š

```ts
interface IPerson {
    name: string
    age: number
}

type IPartial = Partial<IPerson>

let p1: IPartial = {}
```

### **Partial åŸç†**

Partial` çš„å®ç°ç”¨åˆ°äº† `in` å’Œ `keyof

```ts
/**
 * Make all properties in T optional
 */
type Partial<T> = {
    [P in keyof T]?: T[P]
}
```

- `[P in keyof T]`éå†`T`ä¸Šçš„æ‰€æœ‰å±æ€§
- `?:`è®¾ç½®å±æ€§ä¸ºå¯é€‰çš„
- `T[P]`è®¾ç½®ç±»å‹ä¸ºåŸæ¥çš„ç±»å‹

## **Readonly**

`Readonly<T>`å°†`T`çš„æ‰€æœ‰å±æ€§æ˜ å°„ä¸ºåªè¯»çš„ï¼Œä¾‹å¦‚ï¼š

```ts
interface IPerson {
  name: string
  age: number
}

type IReadOnly = Readonly<IPerson>

let p1: IReadOnly = {
  name: 'lin',
  age: 18
}
```

### **Readonly åŸç†**

å’Œ `Partial` å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œ

```ts
/**
 * Make all properties in T readonly
 */
type Readonly<T> = {
    readonly [P in keyof T]: T[P]
}
```

- `[P in keyof T]`éå†`T`ä¸Šçš„æ‰€æœ‰å±æ€§
- `readonly`è®¾ç½®å±æ€§ä¸ºåªè¯»çš„
- `T[P]`è®¾ç½®ç±»å‹ä¸ºåŸæ¥çš„ç±»å‹

## **Pick**

`Pick`ç”¨äºæŠ½å–å¯¹è±¡å­é›†ï¼ŒæŒ‘é€‰ä¸€ç»„å±æ€§å¹¶ç»„æˆä¸€ä¸ªæ–°çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š

```ts
interface IPerson {
  name: string
  age: number
  sex: string
}

type IPick = Pick<IPerson, 'name' | 'age'>


let p1: IPick = {
  name: 'vvv',
  age: 18
}

```

è¿™æ ·å°±æŠŠ name å’Œ age ä» IPerson ä¸­æŠ½å–å‡ºæ¥ã€‚

![image-20221017173126113](./assets/image-20221017173126113.png)

### **Pick åŸç†**

```ts
/**
 * From T, pick a set of properties whose keys are in the union K
 */
type Pick<T, K extends keyof T> = {
    [P in K]: T[P]
}
```

Pickæ˜ å°„ç±»å‹æœ‰ä¸¤ä¸ªå‚æ•°:

- ç¬¬ä¸€ä¸ªå‚æ•°Tï¼Œè¡¨ç¤ºè¦æŠ½å–çš„ç›®æ ‡å¯¹è±¡
- ç¬¬äºŒä¸ªå‚æ•°Kï¼Œå…·æœ‰ä¸€ä¸ªçº¦æŸï¼šKä¸€å®šè¦æ¥è‡ªTæ‰€æœ‰å±æ€§å­—é¢é‡çš„è”åˆç±»å‹

## **Record**

ä¸Šé¢ä¸‰ç§æ˜ å°„ç±»å‹å®˜æ–¹ç§°ä¸ºåŒæ€,æ„æ€æ˜¯åªä½œç”¨äº obj å±æ€§è€Œä¸ä¼šå¼•å…¥æ–°çš„å±æ€§ã€‚

`Record` æ˜¯ä¼šåˆ›å»ºæ–°å±æ€§çš„éåŒæ€æ˜ å°„ç±»å‹ã€‚

```ts
interface IPerson {
  name: string
  age: number
}

type IRecord = Record<string, IPerson>

let personMap: IRecord = {
   person1: {
       name: 'vvv',
       age: 18
   },
   person2: {
       name: 'vvv',
       age: 20
   } 
}
```

![image-20221017173309713](./assets/image-20221017173309713.png)

### **Record åŸç†**

```ts
/**
 * Construct a type with a set of properties K of type T
 */
type Record<K extends keyof any, T> = {
    [P in K]: T
}
```

Record æ˜ å°„ç±»å‹æœ‰ä¸¤ä¸ªå‚æ•°:

- ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¼ å…¥ç»§æ‰¿äº any çš„ä»»ä½•å€¼
- ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œä¸ºæ–°åˆ›å»ºå¯¹è±¡çš„å€¼ï¼Œè¢«ä¼ å…¥ã€‚

## **æ‰©å±•ï¼šæ¡ä»¶ç±»å‹**

```ts
T extends U ? X : Y 
//è‹¥ç±»å‹ T å¯è¢«èµ‹å€¼ç»™ç±»å‹ U,é‚£ä¹ˆç»“æœç±»å‹å°±æ˜¯ X ç±»å‹,å¦åˆ™å°±æ˜¯ Y ç±»å‹
```

Exclude å’Œ Extract çš„å®ç°å°±ç”¨åˆ°äº†æ¡ä»¶ç±»å‹ã€‚

## **Exclude**

Exclude æ„æ€æ˜¯ä¸åŒ…å«ï¼Œ`Exclude<T, U>` ä¼šè¿”å› `è”åˆç±»å‹ T` ä¸­ä¸åŒ…å« `è”åˆç±»å‹ U` çš„éƒ¨åˆ†ã€‚

```ts
type Test = Exclude<'a' | 'b' | 'c', 'a'>
```

![image-20221017173438804](./assets/image-20221017173438804.png)

### **Exclude åŸç†**

```ts
/**
 * Exclude from T those types that are assignable to U
 */
type Exclude<T, U> = T extends U ? never : T
```

- `never`è¡¨ç¤ºä¸€ä¸ªä¸å­˜åœ¨çš„ç±»å‹
- `never`ä¸å…¶ä»–ç±»å‹çš„è”åˆåï¼Œä¸ºå…¶ä»–ç±»å‹

## **Extract**

`Extract<T, U>`æå–è”åˆç±»å‹ T å’Œè”åˆç±»å‹ U çš„æ‰€æœ‰äº¤é›†ã€‚

```ts
type Test = Extract<'key1' | 'key2', 'key1'>
```

![image-20221017173623208](./assets/image-20221017173623208.png)

### **Extract åŸç†**

```ts
/**
 * Extract from T those types that are assignable to U
 */
type Extract<T, U> = T extends U ? T : never
```



<br/>
<hr />

â­ï¸â­ï¸â­ï¸å¥½å•¦ï¼ï¼ï¼æœ¬æ–‡ç« åˆ°è¿™é‡Œå°±ç»“æŸå•¦ã€‚â­ï¸â­ï¸â­ï¸

âœ¿âœ¿ãƒ½(Â°â–½Â°)ãƒâœ¿

æ’’èŠ± ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸ğŸŒ¸