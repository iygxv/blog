# 4-JavaScript高级程序设计

## 第1章： 什么是JavaScript

1. JavaScript实现包含`核心（ECMAScript）、 文档对象模型（DOM）、 浏览器对象模型（BOM）`

2. BOM主要针对浏览器窗口和子窗口（frame）
   - 弹出新浏览器窗口的能力
   - 移动、缩放和关闭浏览器窗口的能力
   - navigator对象，提供关于浏览器的详尽信息
   - location对象，提供浏览器加载页面的详尽信息
   - screen对象，提供关于用户屏幕分辨率的详尽信
   -  performance对象，提供浏览器内存占用、导航行为和时间统计的详尽信息
   - 对cookie的支持
   - 其他自定义对象，如XMLHttpRequest和IE的ActiveXObject

## 第2章： HTML中的JavaScript

1. script标签的属性

- async：可选。表示应该`立即开始下载脚本`，但不能阻止其他页面动作(`异步操作`)，比如下载资源或等待其他脚本加载。`只对外部脚本文件有效`。
- defer：可选。表示脚本可以延迟到文档完全被解析和显示之后再执行。`只对外部脚本文件有效`。
- type：可选。如果这个值是module，则代码会被当成ES6模块，而且只有这时候代码中才能出现import和export关键字。

2. 可以使用defer属性把脚本推迟到文档渲染完毕后再执行。推迟的脚本原则上按照它们被列出的次序执行。

3. 可以使用async属性表示脚本不需要等待其他脚本，同时也不阻塞文档渲染，即异步加载。异步脚本不能保证按照它们在页面中出现的次序执行。

4. IE5.5发明了文档模式的概念，即可以使用doctype切换文档模式。最初的文档模式有两种：混杂模式（quirks mode）和标准模式（standards mode）。前者让IE像IE5一样（支持一些非标准的特性），后者让IE具有兼容标准的行为。

## 第3章： 语言基础

1. const的行为与let基本相同，唯一一个重要的区别是用它声明变量时必须同时初始化变量，且尝试修改const声明的变量会导致运行时错误。

2. ECMAScript 7新增了指数操作符，Math.pow()现在有了自己的操作符＊＊

   ```js
   Math.pow9(3, 2) === 3 ** 2
   ```

3.  switch语句在比较每个条件的值时会使用全等操作符，因此不会强制转换数据类型（比如，字符串"10"不等于数值10）
4.  与其他语言不同，ECMAScript不区分整数和浮点值，只有Number一种数值数据类型

## 第4章： 变量、作用域与内存

1. 在浏览器的发展史上，垃圾回收用到过两种主要的标记策略：`标记清理和引用计数`
2. JavaScript最常用的垃圾回收策略是标记清理（mark-and-sweep）



## 第8章：对象、类与面向对象编程

1. 属性分两种：数据属性和访问器属性

   数据属性:

   - [[Configurable]]：表示属性是否可以通过delete删除并重新定义，是否可以修改它的特性，以及是否可以把它改为访问器属性。默认情况下，所有直接定义在对象上的属性的这个特性都是true
   - [[Enumerable]]：表示属性是否可以通过for-in循环返回。默认情况下，所有直接定义在对象上的属性的这个特性都是true
   -  [[Writable]]：表示属性的值是否可以被修改。默认情况下，所有直接定义在对象上的属性的这个特性都是true
   - [[Value]]：包含属性实际的值。这就是前面提到的那个读取和写入属性值的位置。这个特性的默认值为undefined

   访问器属性

   - 访问器属性不包含数据值。相反，它们包含一个获取（getter）函数和一个设置（setter）函数，不过这两个函数不是必需的

2. Object.assign会修改目标对象(`也就是修改好的目标对象ret`)

   ```js
   let a = {}
   let b = {name: 'vv'}
   let ret = Object.assign(a, b)
   a // {name: 'vv'}
   a === ret // true
   ```

   

## 第18章：动画与Canvas图形

1. 一般计算机显示器的屏幕刷新率都是60Hz，基本上意味着每秒需要重绘60次, 因此，实现平滑动画最佳的重绘间隔为1000毫秒/60，大约17毫秒
2. 虽然使用setInterval()的定时动画比使用多个setTimeout()实现循环效率更高，但也不是没有问题。无论setInterval()还是setTimeout()都是不能保证时间精度的。作为第二个参数的延时只能保证何时会把代码添加到浏览器的任务队列，不能保证添加到队列就会立即运行。如果队列前面还有其他任务，那么就要等这些任务执行完再执行。简单来讲，这里毫秒延时并不是说何时这些代码会执行，而只是说到时候会把回调加到任务队列。如果添加到队列后，主线程还被其他任务占用，比如正在处理用户操作，那么回调就不会马上执行。
3. requestAnimationFrame是简单但实用的工具，可以让JavaScript跟进浏览器渲染周期，从而更加有效地实现网页视觉动效



## 第20章：JavaScriptAPI

1. 跨文档消息的核心方法是postMessage()方法
