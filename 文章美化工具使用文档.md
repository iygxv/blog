# 文章美化工具使用文档

> 本文档描述了如何使用 beautify.js 和 removeBeautify.js 工具来为你的 Markdown 文章添加和移除精美的结尾样式。

## 目录

- [安装准备](#安装准备)
- [添加文章结尾](#添加文章结尾)
  - [基本使用](#基本使用)
  - [命令参数](#beautify-参数)
  - [主题风格](#主题风格)
  - [示例命令](#beautify-示例)
- [移除文章结尾](#移除文章结尾)
  - [基本使用](#基本使用-1)
  - [命令参数](#removebeautify-参数)
  - [示例命令](#removebeautify-示例)
- [工作流示例](#工作流示例)
- [常见问题](#常见问题)

## 安装准备

在使用这两个工具前，你需要先安装依赖：

```bash
# 安装 chalk 包用于终端美化输出
npm install chalk@4.1.2
```

确保以下JavaScript文件位于你的项目目录中：
- `beautify.js` - 用于添加文章结尾
- `removeBeautify.js` - 用于移除文章结尾和签名标记

## 添加文章结尾

### 基本使用

最简单的用法是直接执行脚本，它将处理 `./docs` 目录下的所有 Markdown 文件：

```bash
node beautify.js
```

### Beautify 参数

beautify.js 支持以下命令行参数：

| 参数 | 简写 | 描述 |
|------|------|------|
| `--help` | `-h` | 显示帮助信息 |
| `--dry-run` | `-d` | 预览模式，不实际修改文件 |
| `--force` | `-f` | 强制更新已有结尾 |
| `--theme=<主题>` | | 指定使用的主题 |
| `--verbose` | `-v` | 显示详细输出 |
| `--quiet` | `-q` | 安静模式，仅显示错误 |
| `--exclude=<模式>` | | 排除匹配的文件(支持正则表达式) |
| `--include=<模式>` | | 仅包含匹配的文件(支持正则表达式) |

### 主题风格

工具支持5种内置主题：

1. **minimalist** - 简约现代风格
   - 干净清爽的设计，简单的图标和分隔符

2. **elegant** - 优雅经典风格
   - 使用优雅的经典图案作为装饰元素

3. **geometric** - 几何图形风格
   - 使用几何图形作为装饰，现代感强

4. **gradient** - 渐变风格
   - 使用渐变色作为背景，色彩丰富

5. **tech** - 科技未来风格
   - 技术相关图标，适合技术文章

### Beautify 示例

```bash
# 处理指定目录
node beautify.js ./src/posts

# 使用特定主题
node beautify.js --theme=gradient

# 强制更新所有已有的结尾
node beautify.js --force

# 预览模式，查看主题效果
node beautify.js --dry-run

# 显示详细日志
node beautify.js --verbose

# 排除草稿文件
node beautify.js --exclude="draft|temp"

# 只处理特定目录下的文件
node beautify.js ./content --include="tutorial"
```

## 移除文章结尾

### 基本使用

最简单的用法是直接执行脚本，它将移除 `./docs` 目录下所有 Markdown 文件中的标记结尾和任何签名标记：

```bash
node removeBeautify.js
```

> **注意:** removeBeautify.js 现在默认会同时移除文章结尾和任何 `<!-- ArticleEndBeautifier: xxx -->` 签名标记。

### RemoveBeautify 参数

removeBeautify.js 支持以下命令行参数：

| 参数 | 简写 | 描述 |
|------|------|------|
| `--help` | `-h` | 显示帮助信息 |
| `--dry-run` | `-d` | 预览模式，不实际修改文件 |
| `--verbose` | `-v` | 显示详细输出 |
| `--quiet` | `-q` | 安静模式，仅显示错误 |
| `--all` | `-a` | 移除所有风格的结尾 |
| `--exclude=<模式>` | | 排除匹配的文件(支持正则表达式) |
| `--include=<模式>` | | 仅包含匹配的文件(支持正则表达式) |

### RemoveBeautify 示例

```bash
# 处理指定目录
node removeBeautify.js ./src/posts

# 预览将要移除的内容
node removeBeautify.js --dry-run --verbose

# 移除所有风格的结尾和签名标记
node removeBeautify.js --all

# 安静模式执行
node removeBeautify.js --quiet
```

## 工作流示例

以下是一个完整的工作流示例，展示如何管理文章结尾：

```bash
# 1. 为所有文章添加结尾
node beautify.js

# 2. 预览生成的结尾效果
# (在浏览器中查看生成的Markdown文件)

# 3. 对特定目录使用不同主题
node beautify.js ./docs/tutorials --theme=tech --force

# 4. 预览将要移除的结尾
node removeBeautify.js --dry-run --verbose

# 5. 移除特定目录的结尾和签名标记
node removeBeautify.js ./docs/archives
```

## 常见问题

**Q: 为什么有些文件没有被处理？**

A: 脚本默认会跳过所有名为 `index.md` 的文件，以及非Markdown文件。使用 `--verbose` 参数查看详细日志。

**Q: 如何替换已有的结尾样式？**

A: 使用 `beautify.js --force` 命令可以强制更新已有的结尾样式。

**Q: 添加结尾后如何批量移除？**

A: 使用 `removeBeautify.js` 可以移除带有标记的结尾和所有签名标记。如果需要移除所有样式（包括无标记的），请使用 `--all` 参数。

**Q: 如何只处理特定目录或文件？**

A: 你可以指定目标目录，如 `node beautify.js ./specific/path`，也可以使用 `--include` 或 `--exclude` 参数进行更精细的控制。

**Q: 如何预览不同主题的效果？**

A: 使用 `node beautify.js --dry-run --theme=主题名称` 可以预览特定主题的效果，而不实际修改文件。 